// <auto-generated/>
#nullable enable
using System;
using System.Threading;
using System.Threading.Tasks;
using Quark.Abstractions;
using Quark.Abstractions.Streaming;

namespace Quark.Generated;

/// <summary>
/// AOT-safe dispatcher for Quark.Tests.TestStreamActor.
/// Generated by StreamSourceGenerator to eliminate reflection.
/// </summary>
internal sealed class TestStreamActorStreamDispatcher : IStreamConsumerDispatcher
{
    public Type ActorType => typeof(Quark.Tests.TestStreamActor);
    public Type MessageType => typeof(string);

    public async Task ActivateAndNotifyAsync(
        IActorFactory actorFactory,
        string actorId,
        object? message,
        StreamId streamId,
        CancellationToken cancellationToken)
    {
        // Type-safe actor creation - no reflection
        var actor = actorFactory.GetOrCreateActor<Quark.Tests.TestStreamActor>(actorId);
        
        // Type-safe message casting and method invocation - no reflection
        var typedMessage = (string)message!;
        await actor.OnStreamMessageAsync(typedMessage, streamId, cancellationToken);
    }
}