# **‚öõÔ∏è Quark**

**Quark** is a high-performance, distributed virtual actor framework built for **.NET 10+** with a focus on **Native AOT**, ultra-low latency, and modern developer experience.

Inspired by Microsoft Orleans and Akka.NET, Quark aims to bridge the gap between "Virtual Actors" and "Supervision Hierarchies" while maintaining a zero-reflection, hardware-accelerated footprint.

## **üöÄ Key Philosophies**

* **AOT First:** No Reflection.Emit. Everything is generated at build time via Incremental Source Generators.  
* **Secure by Default:** UDP-based communication via QUIC (TLS 1.3).  
* **Control & Density:** Explicit lifecycle management to support high-density container environments.  
* **Plug-and-Play:** Modular persistence and clustering providers.

## **üó∫Ô∏è Development Roadmap**

### **Phase 1: The Core "Static" Engine (Local Runtime)** ‚úÖ COMPLETED

*Focus: AOT-compatible code generation and basic actor lifecycle.*

* \[‚úì\] **Source Generator V1:** Incremental generator for \[QuarkActor\] attributes.  
* \[‚úì\] **Turn-based Mailbox:** High-performance messaging via System.Threading.Channels.  
* \[‚úì\] **Explicit Lifecycle:** Support for ActivateAsync and DeactivateAsync (Explicit Stop).  
* \[‚úì\] **Local Context:** Request ID and Metadata propagation for tracing.
* \[‚úì\] **Supervision Hierarchies:** Parent-child actor relationships with failure handling.
* \[‚úì\] **Persistence Abstractions:** Multi-storage provider support with IStateStorage.

**Status:** All features implemented and tested. 33/33 tests passing.

### **Phase 2: The Cluster & Networking Layer** ‚úÖ COMPLETED

*Focus: Silo-to-Silo communication over encrypted UDP.*

* \[‚úì\] **Transport Abstraction:** IQuarkTransport interface for bi-directional gRPC streaming.  
* \[‚úì\] **Consistent Hashing:** Hash ring with virtual nodes for even actor distribution.  
* \[‚úì\] **Silo Membership:** Redis-based distributed Silo table for node discovery.  
* \[‚úì\] **QuarkEnvelope:** Universal message wrapper for all actor invocations.  
* \[‚úì\] **Location Transparency:** Routing logic via consistent hash ring.  
* \[üöß\] **QUIC Transport:** gRPC over HTTP/3 implementation (protobuf defined).
* \[üöß\] **Placement Policies:**  
  * Consistent Hashing (implemented)
  * Random (to be added)
  * Prefer Local (to be added)
  * Stateless Workers (to be added)

**Status:** Core abstractions and Redis clustering complete. 43/43 tests passing.

**Architecture:**
- `Quark.Networking.Abstractions` - Core networking interfaces
- `Quark.Transport.Grpc` - gRPC/HTTP3 implementation (in progress)
- `Quark.Clustering.Redis` - Redis-based membership with consistent hashing

### **Phase 3: Reliability & Supervision (The "Power" Layer)**

*Focus: Advanced failure handling and reentrancy.*

* \[ \] **Supervision Trees:** Akka-style Parent-Child hierarchies within the Virtual Actor model.  
* \[ \] **Call-Chain Reentrancy:** Prevent deadlocks in circular actor calls using Chain IDs.  
* \[ \] **Consistent Hashing:** Predictable actor placement and rebalancing on cluster changes.  
* \[ \] **Cluster Health:** Advanced heartbeat monitoring and automatic silo eviction.

### **Phase 4: Persistence & Temporal Services**

*Focus: Making state and time durable.*

* \[ \] **Reminders:** Persistent, distributed timers that survive cluster reboots.  
* \[ \] **Timers:** Lightweight, in-memory volatile timers.  
* \[ \] **State Providers:** AOT-safe storage for SQL, Redis, and Mongo using JSON Source Generators.  
* \[ \] **Event Sourcing:** Native journaling support for audit-logs and state replay.

### **Phase 5: Reactive Streaming**

*Focus: Decoupled data broadcasting.*

* \[ \] **Explicit Streams:** Manual Pub/Sub via StreamID.  
* \[ \] **Implicit Streams:** Automatically activate actors based on stream namespaces.  
* \[ \] **Backpressure:** Adaptive flow control for slow consumers.

## **üèóÔ∏è Project Structure**

* Quark.Abstractions: Core interfaces, attributes, and shared models. (No dependencies).  
* Quark.Generators: The Roslyn Incremental Source Generator.  
* Quark.Core: The actor runtime, mailbox, and local scheduling.  
* Quark.Transport.Quic: UDP/QUIC networking implementation.  
* Quark.Clustering.\*: Membership providers (Redis, Kubernetes, etc.).

## **üõ†Ô∏è Requirements**

* .NET 10.0 SDK+  
* Visual Studio 2026 or JetBrains Rider  
* (Optional) Docker for local clustering tests

## **ü§ù Contributing**

Quark is currently in **Phase 0 (Architectural Planning)**. We welcome architectural feedback and discussions regarding the gRPC/QUIC transport layer.

*Generated by the Quark Development Team.*
